{% extends "base.html" %}
{% block content %}

<div class="container-fluid">
  <div class="row">
    <div class="col-sm-3">
      <h1 class="page-header">Staffing Simulator</h1>
      <div class="counter"></div>
    </div>
    <div class="col-sm-9">
      <div class="staffing_plans_project">
        <div class="staffing_plans_project_header">
          <h3>Available staff</h3>
        </div>

        {% safe %} {{people-table}} {% endsafe %}

      </div>
      <div class="staffing_plans_project">
        <div class="staffing_plans_project_header">
          <h3>{{project.type}} ({{project.duration-weeks}} weeks)</h3>
        </div>
        <table class="project_table">
          <thead>
            <tr><th/><th/>
              {% for dates in date-stream %}
                <th class="staffing_plans_header_month"> {{dates.month}} </th>
              {% endfor %}
            </tr>
            <tr><th/><th/>
              {% for dates in date-stream %}
                <th> {{dates.start-of-week}} </th>
              {% endfor %}
            </tr>
          </thead>
          <tbody>
          {% for role in project.spots %}
            <tr class="staffing_plans_role">
              <td class="staffing_plans_role_cell open_role_background_{{role.role}}">
                <!-- <div class="probability_label_default probability_label_{{role.role}}">100%</div> -->
                <div><em>{{role.role}}</em><br />{{role.grade}}</div>
              </td>
              {% for week in lead-time %}
                <td class="no_open_role"> </td>
              {% endfor %}
              {% for week in duration %}
                <td class="staffing_plans_role_cell open_role_background_{{role.role}}"> </td>
              {% endfor %}

            </tr>
          {% endfor %}
          </tbody>
        </table>
      </div>
    </div>  
  </div>  
</div>

{% endblock %}

{% block page-scripts %}

<script type="text/javascript">

$('.project_table > tbody > tr').click(function() {
    alert("Row clickec");
});

var clock = $('.counter').FlipClock(10, {
    clockFace: 'Counter'
  });

  setTimeout(function() {
    var interval = setInterval(function() {
      if(clock.getTime().time <= 0) {
        clock.reset();
        $('.project_table').addClass('disabled')
        // clearInterval(interval);
      }     
      clock.decrement();
    }, 1000);
  });
</script>

{% endblock %}
