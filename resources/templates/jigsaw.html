{% extends "base.html" %}
{% block content %}
<div class="counter"></div>

<div class="staffing_plans_project">
  <div class="staffing_plans_project_header">
    <h3>Available staff</h3>
  </div>
  <table class="staffing_table">
    <thead>
      <tr>
        <th></th>
        {% for grade in grades %}
          <th class="staff_table_grade_header"> {{grade}} </th>
        {% endfor %}
      </tr>
    </thead>
    <tbody>
        {% for role in roles %}
          <tr class="staffing_plans_role">
            <td class="staffing_plans_role_cell open_role_background_{{role|lower}}">{{role}}</td>
            {% for grade in grades %}
              <td class="staffing_plans_role_cell open_role_background_{{role|lower}}"> 0 </td>
            {% endfor %}
          </tr>
        {% endfor %}
    </tbody>
  </table>
</div>

<div class="staffing_plans_project">
  <div class="staffing_plans_project_header">
    <h3>{{project.type}} ({{project.duration-weeks}} weeks)</h3>
  </div>
  <table class="project_table">
    <thead>
      <tr><th/>
        {% for dates in date-stream %}
          <th class="staffing_plans_header_month"> {{dates.month}} </th>
        {% endfor %}
      </tr>
      <tr><th/>
        {% for dates in date-stream %}
          <th> {{dates.start-of-week}} </th>
        {% endfor %}
      </tr>
    </thead>
    <tbody>
    {% for role in project.spots %}
      <tr class="staffing_plans_role">
        <td class="staffing_plans_role_cell open_role_background_{{role.role}}">
          <!-- <div class="probability_label_default probability_label_{{role.role}}">100%</div> -->
          <div><em>{{role.role}}</em><br />{{role.grade}}</div>
        </td>
        {% for week in lead-time %}
          <td class="no_open_role"> </td>
        {% endfor %}
        {% for week in duration %}
          <td class="staffing_plans_role_cell open_role_background_{{role.role}}"> </td>
        {% endfor %}

      </tr>
    {% endfor %}
    </tbody>
  </table>
</div>

{% endblock %}

{% block page-scripts %}

<script type="text/javascript">
var clock = $('.counter').FlipClock(10, {
    clockFace: 'Counter'
  });

  setTimeout(function() {
    var interval = setInterval(function() {
      if(clock.getTime().time <= 0) {
        clock.reset();
        // clearInterval(interval);
      }     
      clock.decrement();
    }, 1000);
  });
</script>

{% endblock %}
